# iOS 스타터 캠프 - 2021.01.18 월요일

## 은행매니저 프로젝트 공유

### Bam

- NSLock 선택한 이유
    - 은행원이 놀고있는지 계속 검사하는 것은 자원소모가 심하다고 들어서 NSLock으로 구현

### 이니

## Play Kahoot!

- ARC를 통한 인스턴스의 생명주기는 런타임에 결정된다
    - 답X: 컴파일할 때 이미 인스턴스의 할당, 해제 부분이 삽입된다. 그러므로 컴파일시에 결정된다
- 백그라운드 사용 앱은 백그라운드 실행 중 시스템이 앱을 언제 종료할지 알 수 없다.
    - 답X: 백그라운드 사용하겠다라고 설정한 앱은 시스템이 종료하지 않음

## 강의 - HTTP와 TCP/IP

### 학습활동

[HTTP 메서드 종류] (https://javaplant.tistory.com/18)

- GET 
  URI(URL)가 가진 정보를 검색하기 위해 서버측에 요청하는 형태
- POST 
  요청 URI(URL)에 폼 입력처리를 하기 위해 서버측 스크립트 혹은 CGI 프로그램으로 구성되고 Form Action과 함께 전송된다. 이때 헤더 정보가 포함되지 않고 데이터 부분에 요청 정보가 들어가게 된다.
- HEAD 
 웹 서버에서 헤더 정보 이외엔 어떤 데이터도 보내지 않는다. 웹 서버의 다운 여부 점검이나 웹 서버 정보 등을 얻기 위해 사용될 수 있다.
- OPTIONS 
 웹서버에서 지원되는 메소드의 종류를 확인할 경우 사용
- PUT 
 요청된 자원을 수정한다. 내용 갱신을 위주로 Location : URI를 보내지 않아도 된다. 클라이언트 측은 요청된 URI를 그대로 사용하는 것으로 간주.
- DELETE 
 요청된 자원을 삭제할 것을 요청함.(안정성 문제로 대부분 서버에서 비활성)
- TRACE 
 원격지 서버에 루프백 메시지 호출하기 위한 테스트용으로 사용
- CONNECT 
 동적으로 터널모드를 교환, 프락시 기능을 요청시 사용
- PATCH 
 PUT과 유사하게 요청된 자원을 수정 할 때 사용한다. 해당자원의 일부를 교체하는 의미로 사용
 
웹 애플리케이션에서 일반적으로 사용하는 GET, POST 메소드 이외의 PUT, DELETE, COPY, MOVE 등의 메소드를 허용하였을 경우 공격자가 이를 이용하여 웹 서버에 파일을 생성하거나 삭제 및 수정이 가능한 취약점이 존재
웹 서버 보안 설정 : GET, POST를 제외한 메소드를 비활성화 시키는 것을 권장함- (RESTful 방식 이전 내용?)
브라우저에서 사용하는 요청은 GET
 
REST, RESTful API개념, 기존 방식과의 차이점 참고
1. REST(Representational State Transfer)란?
- HTTP URI + HTTP Method
- HTTP URI를 통해 제어할 자원(Resource)을 명시하고 HTTP Method(GET, POST, PUT, DELETE)를 통해
해당 자원(Resource)를 제어하는 명령을 내리는 방식의 아키텍처
 
2. RESTful API란?
RESTful API는 HTTP와 URI기반으로 자원에 접근할 수 있도록 제공하는 애플리케이션 개발 인터페이스(REST의 원리를 따르는 시스템은 RESTful이라고 지칭된다.)
 
3. 기존 웹 접근방식과 RESTful API 방식과의 차이점
종류
방식
기존 게시판
방식
RESTful API지원 게시판
글 읽기
GET
/list.do?no=100&name=java
GET
/bbs/java/100
글 등록
POST
/insert.do
POST
/bbs/java/100
글 삭제
GET
/delete.do?no=100&name=java
DELETE
/bbs/java/100
글 수정
POST
/update.do
PUT
/bbs/java/100

- 아래 상황에서는 HTTP의 어떤 메서드를 사용해 호출하는 것이 적절할지 논의해봅시다
  - 1 : 게시판 글 작성 - POST
  - 2 : 게시판 글 내용 요청 - GET
  - 3 : 게시판 글 수정 - (PATCH?) PUT? (PUT과 PATCH의 차이: PUT은 해당 자원의 전체를 교체하는 의미를 지님, PATCH는 일부를 변경한다는 의미를 지님)
  - 4 : 게시판 글 삭제 - DELETE (안전성 문제로 대부분 서버에서는 DELETE비활성 한다는데 이 때는 어떻게 삭제할까요? 삭제 해달라고 서버에 요청하는것인지…??)
  - 5 : 이미지 요청 - POST
  - 6 : 이미지의 크기 알아보기 - HEAD????? -> POST가 아닐까요 -> GET/POST만 사용한다면 GET 아닐까요? (요청하는 의미로 GET이 맞는거 같다고 판단) HEAD
  - 7 : 오늘의 미세먼지 수치를 요청 - GET
  - 8 : 회원정보 수정 - PUT

-> 1번째 모둠 발표내용
- 1 : POST 
	멱등성이란? 동일한 요청을 한 번 보내는 것과 여러번 연속으로 보내는 것이 같은 효과를 지니고, 서버의 상태도 동일하게 남을 때 멱등성을 가졌다고 할 수 있다.
	POST는 row가 계속 쌓이고 PUT은 늘 같은 결과를 나타낸다. (PUT은 멱등성을 갖음)
- 2 : GET
- 3 : PATCH는 해당자원의 일부를 교체하는 의미로 사용하고 PUT의 경우 자원 전체를 갱신하는 의미이다.
- 4 : DELETE
- 5 : GET
- 6 : HEAD
- 7 : GET
- 8 : PATCH, PUT (상황에 따라서 다를 것 같다.)

	

참고
1XX: Informational responses - 요청을 받았으며 프로세스를 계속함
2XX: Sucess - 요청을 성공적으로 받았으며 인식했고 수용했음
3XX: Redirection - 클라이언트의 요청에 대해 적절한 위치를 제공하거나 대안의 응답을 제공
4XX: Client Error - 클라이언트의 잘못된 요청
5XX: Server Error - 클라이언트의 정상적인 요청에 대해 서버의 문제로 인해 응답할 수 없음

- 아래 상황에서는 HTTP의 상태 코드는 어떻게 표현하는 것이 적절할지 논의해봅시다.
  - 게시판 글 삭제 불가 - 요청한 리소스 찾을 수 없음 - 404 Not Found
  - 게시판 글 작성 완료 - 200 OK 201 Created
  - 서버 애플리케이션 exception 발생 - 500? 506? 5xx...
  - 게시글 찾을 수 없음 - 404? 204? 410?
  - 서버 데이터베이스 오류 204? 507?
  - 게시글 접근 거부 - 403 Forbidden
  - http://a.com 을 https://a.com 으로 리다이렉션 - 301 Moved Permanently
  - 게시판 글 수정 완료 - 200 OK
  - 요청 과부하로 접속 불가 - 429 Too many Requests
  - 접근 권한 없음 - 403 Forbidden
  - 요청 URL이 너무 김 - 414 Request URL Too Long

-> 2번째 모둠 발표
 - 게시판 글 삭제 불가 - 401(권한 없음), 404(페이지 없음)
 - 요청한 리소스 찾을 수 없음 - 404(찾을 수 없음), 410(사라짐)
  - 게시판 글 작성 완료 - 201(작성됨)
  - 서버 애플리케이션 exception 발생 - exception 발생 	417(예상실패)?? 5xx
  - 게시글 찾을 수 없음 - 404(요청한 페이지 없음), 412(사전 조건 실패 - 게시글이 없는 요청했을 경우)
  - 서버 데이터베이스 오류 - 500(내부 서버 오류-DB오류), 501(구현되지 않음-DB없음)
  - 게시글 접근 거부 - 403(금지됨-서버가 요청거부)
  - http://a.com 을 https://a.com 으로 리다이렉션 - 301(영구 이동)
  - 게시판 글 수정 완료 - 200(성공) 201(새 리소스 작성)
  - 요청 과부하로 접속 불가 - 413(요청이 너무 큼), 429(요청이 너무 많음)
  - 접근 권한 없음 - 401(권한 없음)
  - 요청 URL이 너무 김 - 414

* HTTPS는 HTTP에 어떤 프로토콜이 추가된 것이며, 어떤 이점과 단점이 있을까?
 -SSL(Secure Socket Layer) 프로토콜 -> TLS(전송계층보안프로토콜)
	-HTTPS의 장점: 보안에 취약한 HTTP의 단점을 보안한다. SSL 인증서를 통해 사이트에 제공하는 정보를 암호화한다.
	-HTTPS의 단점: 인증서를 발급하고 유지하기 위한 추가 비용과 HTTP보다 느린 속도가 단점이다.

* HTTP v1.1와 v.2는 어떤 차이가 있고, 현재 우리가 주로 사용하는 버전은 몇일까?
- 차이점 
  HTTP v1.1 : 기본적으로 하나의 연결당 하나의 요청과 응답을 처리함.
  HTTP v2.0 : 하나의 연결에 여러개의 메시지를 주고 받을 수 있음
 
현재는 1999년에 발표된 1.1 버전을 대부분 사용중이다. 여러 주요 사이트는 1.1과 2를 동시에 지원하고 있다.
현재 3.0 개발중...

참고 자료 )
HTTP v1.1과 v2의 차이점 (HTTP 1.1 vs HTTP2.0 차이점 간단히 살펴보기. HTTP1.1은 1999년 출시 이후 지금까지 가장 많이 사용되고… | by Seungho Lee)

현재 주로 우리가 사용하는 버전 
(HTTP(HyperText Transfer Protocol))